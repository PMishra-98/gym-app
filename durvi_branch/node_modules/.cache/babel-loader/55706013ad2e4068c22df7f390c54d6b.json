{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Desktop/Project/durvi_branch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Desktop/Project/durvi_branch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/HP/Desktop/Project/durvi_branch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/HP/Desktop/Project/durvi_branch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/HP/Desktop/Project/durvi_branch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/HP/Desktop/Project/durvi_branch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/HP/Desktop/Project/durvi_branch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/HP/Desktop/Project/durvi_branch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import ReactFormValidation from\"react-form-input-validation\";import Form from'react-bootstrap/Form';import axios from'axios';import config from\"../config.json\";import'../App.css';import ErrorPage from'../error-views/errorPage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Loginpage=/*#__PURE__*/function(_React$Component){_inherits(Loginpage,_React$Component);var _super=_createSuper(Loginpage);function Loginpage(props){var _this$state;var _this;_classCallCheck(this,Loginpage);_this=_super.call(this,props);_this.state=(_this$state={token:\"\",apiError:null},_defineProperty(_this$state,\"token\",localStorage.getItem(\"branchToken\")),_defineProperty(_this$state,\"fields\",{userName:\"\",password:\"\"}),_defineProperty(_this$state,\"errors\",{}),_this$state);_this.form=new ReactFormValidation(_assertThisInitialized(_this),{locale:\"en\"});_this.form.useRules({userName:\"required\",password:\"required\"});_this.form.onformsubmit=function(fields){_this.postData(fields);console.log(fields);};return _this;}_createClass(Loginpage,[{key:\"postData\",value:function(){var _postData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(fields){var _this2=this;var url,obj;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=config.login;obj={userName:fields.userName,password:fields.password};console.log(obj);_context.next=5;return axios.post(url,obj).then(function(response){if(response.data.status==\"error\")_this2.setState({apiError:response.data});else if(response.data==\"wrong credential\"||response.data.role!=\"Manager\")alert(\"enter correct name and password\");else{var userDetails=response.data;console.log(userDetails);localStorage.setItem(\"branchToken\",\"Bearer \"+userDetails.token);localStorage.setItem(\"branchCode\",userDetails.branchCode);window.location=\"/branch/home/\"+userDetails.branchCode;// this.props.history.push(\"/branch/home\");\n}},function(error){var obj={\"status\":\"Network Error\"};if(error.response)_this2.setState({apiError:error.response});else _this2.setState({apiError:obj});});case 5:case\"end\":return _context.stop();}}},_callee);}));function postData(_x){return _postData.apply(this,arguments);}return postData;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid bg\",children:this.state.apiError?/*#__PURE__*/_jsx(ErrorPage,{details:this.state.apiError}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card col-4  login-card  offset-4 my-5  Login-component \",style:{color:\"#D7DBDD80\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row \",style:{margin:1},children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 font-weight-bold text-center mt-5\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"letterFormate\",children:\"Branch Login \"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row  my-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"  col-8 offset-2 \",style:{border:\"none\"},children:/*#__PURE__*/_jsxs(Form,{className:\"myForm\",noValidate:true,onSubmit:this.form.handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"my-4\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\" User Name \",/*#__PURE__*/_jsx(\"i\",{className:\"text-danger\",children:\"*\"}),\" \"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"userName\",style:{backgroundColor:\"#D7DBDD\"},onBlur:this.form.handleBlurEvent,onChange:this.form.handleChangeEvent,value:this.state.fields.userName// To override the attribute name\n,\"data-attribute-name\":\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-warning\",children:this.state.errors.userName?this.state.errors.userName:\"\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mt-4\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\"Password \",/*#__PURE__*/_jsx(\"i\",{className:\"text-danger\",children:\"*\"}),\" \"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",style:{backgroundColor:\"#D7DBDD\"},onBlur:this.form.handleBlurEvent,onChange:this.form.handleChangeEvent,value:this.state.fields.password// To override the attribute name\n,\"data-attribute-name\":\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\" text-warning\",children:this.state.errors.password?this.state.errors.password:\"\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn my-4 text-light text-bold bg-lg bg-warning\",children:\"Login\"})]})})})]})})})});}}]);return Loginpage;}(React.Component);export default Loginpage;","map":{"version":3,"sources":["C:/Users/HP/Desktop/Project/durvi_branch/src/components/Loginpage.js"],"names":["React","ReactFormValidation","Form","axios","config","ErrorPage","Loginpage","props","state","token","apiError","localStorage","getItem","userName","password","form","locale","useRules","onformsubmit","fields","postData","console","log","url","login","obj","post","then","response","data","status","setState","role","alert","userDetails","setItem","branchCode","window","location","error","color","margin","border","handleSubmit","backgroundColor","handleBlurEvent","handleChangeEvent","errors","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport ReactFormValidation from \"react-form-input-validation\";\r\nimport Form  from 'react-bootstrap/Form';\r\nimport axios from 'axios';\r\nimport config from \"../config.json\";\r\nimport '../App.css';\r\nimport ErrorPage from '../error-views/errorPage';\r\nclass Loginpage extends React.Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        token:\"\",\r\n        apiError:null,\r\n        token: localStorage.getItem(\"branchToken\"),\r\n      fields: {\r\n        userName: \"\",\r\n        password:\"\",\r\n      \r\n      },\r\n      errors: {}\r\n    };\r\n    this.form = new ReactFormValidation(this, { locale: \"en\" });\r\n    this.form.useRules({\r\n      userName:\"required\",\r\n      password:\"required\",\r\n     \r\n     });\r\n\r\n    this.form.onformsubmit = (fields) => {\r\n     this.postData(fields);\r\n     console.log(fields);\r\n    }\r\n  }\r\n  async postData(fields){\r\n    const url= config.login;\r\n     let obj = {\r\n      userName: fields.userName,\r\n      password : fields.password\r\n         };\r\nconsole.log(obj);\r\n    await axios.post(url, obj).then(\r\n      (response) => {\r\n      \r\n        if(response.data.status==\"error\") this.setState({apiError:response.data});\r\n        else if(response.data==\"wrong credential\"||response.data.role!=\"Manager\") alert(\"enter correct name and password\");\r\n      \r\n       else {\r\n        let userDetails=response.data;\r\n        console.log(userDetails);\r\n         localStorage.setItem(\"branchToken\",\"Bearer \"+userDetails.token);\r\n         localStorage.setItem(\"branchCode\",userDetails.branchCode);\r\n      window.location=\"/branch/home/\"+userDetails.branchCode;\r\n        // this.props.history.push(\"/branch/home\");\r\n       }\r\n      },\r\n      (error) => {\r\n        let obj={\"status\":\"Network Error\"};\r\n      if(error.response) this.setState({apiError:error.response});\r\n     else this.setState({apiError:obj});\r\n      }\r\n    );\r\n  }\r\n    render() { \r\n        return (\r\n          <div  className=\"container-fluid bg\">\r\n              {this.state.apiError?<ErrorPage details={this.state.apiError}/>:<>\r\n            <div className=\"row \" >\r\n              \r\n              <div className=\"card col-4  login-card  offset-4 my-5  Login-component \" style={{color:\"#D7DBDD80\"}}>\r\n                  <div className=\"row \" style={{margin:1}}>\r\n                 \r\n                  <div  className=\"col-12 font-weight-bold text-center mt-5\">\r\n                  <h1 className=\"letterFormate\">Branch Login </h1></div>\r\n                  </div>\r\n                    \r\n                  <div className=\"row  my-2\">\r\n                 <div className=\"  col-8 offset-2 \" style={{border:\"none\"}}>\r\n                 <Form className=\"myForm\" noValidate onSubmit={this.form.handleSubmit} >\r\n                  <Form.Group className=\"my-4\">\r\n                  <Form.Label> User Name <i className=\"text-danger\">*</i> </Form.Label>\r\n                 <Form.Control\r\n                  type=\"text\"\r\n                  name=\"userName\"\r\n                 style={{backgroundColor:\"#D7DBDD\"}}\r\n                  onBlur={this.form.handleBlurEvent}\r\n                  onChange={this.form.handleChangeEvent}\r\n                  value={this.state.fields.userName}\r\n                  // To override the attribute name\r\n                  data-attribute-name=\"\" />\r\n                  \r\n                  <div className=\"text-warning\">\r\n                  {this.state.errors.userName\r\n                  ? this.state.errors.userName\r\n                  : \"\"}\r\n                  </div>\r\n                  </Form.Group>\r\n                  <Form.Group className=\"mt-4\">\r\n                  <Form.Label>Password <i className=\"text-danger\">*</i> </Form.Label>\r\n                 <Form.Control\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  style={{backgroundColor:\"#D7DBDD\"}}\r\n                  onBlur={this.form.handleBlurEvent}\r\n                  onChange={this.form.handleChangeEvent}\r\n                  value={this.state.fields.password}\r\n                  // To override the attribute name\r\n                  data-attribute-name=\"\" />\r\n                  <div className=\" text-warning\">\r\n                  {this.state.errors.password\r\n                  ? this.state.errors.password\r\n                  : \"\"}\r\n                  </div>\r\n                  </Form.Group>\r\n                \r\n                  <button type=\"submit\" className=\"btn my-4 text-light text-bold bg-lg bg-warning\" >Login</button>\r\n                  </Form>\r\n                 </div>\r\n              </div>\r\n              </div>\r\n            </div></>}\r\n          </div>\r\n          \r\n         );\r\n    }\r\n}\r\n\r\nexport default Loginpage;"]},"metadata":{},"sourceType":"module"}